<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>장바구니 - 잇플 스토어</title>
    <link rel="stylesheet" href="store.css" />
    <link rel="stylesheet" href="cart.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- 헤더 상단 -->
    <div class="header-top" id="headerTop">
      <div class="container">
        <div class="header-top-content">
          <div class="header-left">
            <a href="store.html" class="logo">
              <img src="images/eatplelogo.png" alt="잇플" class="logo-image">
            </a>
          </div>
          <div class="header-center">
            <div class="search-container">
              <input
                type="text"
                class="search-input"
                placeholder="검색어를 입력해주세요"
              />
              <button class="search-btn">
                <svg
                  class="search-icon"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
            </div>
          </div>
          <div class="header-right">
            <div class="header-right-section">
              <div class="header-links">
                <a href="login.html" class="header-link">로그인</a>
                <a href="signup.html" class="header-link">회원가입</a>
                <a href="#support" class="header-link">고객센터</a>
              </div>
              <div class="header-actions">
                <button class="action-btn user-btn">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                  </svg>
                </button>
                <button class="action-btn cart-btn" onclick="location.href='store.html'">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path
                      d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
                    ></path>
                  </svg>
                  <span class="cart-count">0</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 메인 콘텐츠 -->
    <main class="cart-main">
      <div class="container">
        <!-- 페이지 헤더 -->
        <div class="page-header">
          <h1 class="page-title">장바구니</h1>
          <div class="breadcrumb">
            <a href="store.html">스토어</a>
            <span class="breadcrumb-separator">></span>
            <span class="breadcrumb-current">장바구니</span>
          </div>
        </div>

        <!-- 장바구니 콘텐츠 -->
        <div class="cart-content">
          <!-- 왼쪽 섹션 (장바구니 아이템 + 포인트) -->
          <div class="cart-left-section">
            <!-- 장바구니 아이템 목록 -->
            <div class="cart-items-section">
              <div class="cart-items-header">
                <div class="select-all-container">
                  <input type="checkbox" id="selectAll" class="cart-checkbox" />
                  <label for="selectAll">전체선택</label>
                </div>
                <button class="delete-selected-btn" id="deleteSelectedBtn">
                  선택삭제
                </button>
              </div>

              <div class="cart-items-list" id="cartItemsList">
                <!-- 장바구니 아이템들이 JavaScript로 생성됩니다 -->
              </div>

              <!-- 빈 장바구니 메시지 -->
              <div class="empty-cart" id="emptyCart" style="display: none">
                <div class="empty-cart-icon">🛒</div>
                <h3>장바구니가 비어있습니다</h3>
                <p>원하는 상품을 장바구니에 담아보세요</p>
                <a href="store.html" class="continue-shopping-btn"
                  >쇼핑 계속하기</a
                >
              </div>
            </div>

            <!-- 포인트 사용 섹션 -->
            <div class="points-section">
              <div class="points-header">
                <h3>포인트</h3>
              </div>

              <div class="points-content">
                <div class="points-available">
                  <span class="points-label">사용 가능</span>
                  <span class="points-value" id="availablePoints">3,532원</span>
                </div>

                <div class="points-usage">
                  <div class="points-input-container">
                    <span class="points-label">사용</span>
                    <div class="points-input-wrapper">
                      <input
                        type="number"
                        id="pointsInput"
                        class="points-input"
                        value="0"
                        min="0"
                        max="3532"
                        placeholder="0"
                      />
                      <span class="points-unit">원</span>
                      <button
                        class="points-btn use-all-btn"
                        id="useAllPointsBtn"
                      >
                        전액사용
                      </button>
                    </div>
                  </div>

                  <div class="points-actions">
                    <label class="points-checkbox-container">
                      <input
                        type="checkbox"
                        id="alwaysUseAllPoints"
                        class="points-checkbox"
                      />
                      <span class="checkmark"></span>
                      <span class="checkbox-label">항상 전액사용</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 결제 금액 -->
          <div class="order-summary">
            <div class="order-summary-header">
              <h3>결제금액</h3>
            </div>

            <div class="order-summary-content">
              <div class="summary-row">
                <span class="summary-label">상품금액</span>
                <span class="summary-value" id="selectedItemsPrice">0원</span>
              </div>
              <div class="summary-row">
                <span class="summary-label">총 배송비</span>
                <span class="summary-value" id="shippingFee">0원</span>
              </div>
              <div class="shipping-info" id="shippingInfo" style="display: none;">
                <small class="shipping-details" id="shippingDetails"></small>
              </div>
              <div
                class="summary-row points-discount"
                id="pointsDiscountRow"
                style="display: none"
              >
                <span class="summary-label">포인트 할인</span>
                <span class="summary-value discount" id="pointsDiscount"
                  >-0원</span
                >
              </div>
              <div class="summary-row total">
                <span class="summary-label">총 주문금액</span>
                <span class="summary-value" id="totalPrice">0원</span>
              </div>
            </div>

            <button class="order-btn" id="orderBtn" disabled>
              주문하기 (<span id="selectedItemsCount">0</span>개)
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- 마이페이지 모달 -->
    <div id="mypageModal" class="modal">
      <div class="modal-content mypage-modal">
        <div class="modal-header">
          <h2 class="modal-title">마이페이지</h2>
          <button class="modal-close" id="mypageModalClose">&times;</button>
        </div>

        <div class="modal-body">
          <div class="mypage-tabs">
            <button class="mypage-tab active" data-tab="orders">
              주문/배송내역
            </button>
            <button class="mypage-tab" data-tab="wishlist">찜한 상품</button>
            <button class="mypage-tab" data-tab="reviews">리뷰 관리</button>
            <button class="mypage-tab" data-tab="points">포인트</button>
          </div>

          <div class="mypage-content">
            <!-- 주문/배송내역 탭 -->
            <div id="orders-tab" class="tab-content active">
              <div class="orders-list" id="ordersList">
                <!-- 주문 내역이 JavaScript로 생성됩니다 -->
              </div>
            </div>

            <!-- 찜한 상품 탭 -->
            <div id="wishlist-tab" class="tab-content">
              <div class="wishlist-grid" id="wishlistGrid">
                <!-- 찜한 상품들이 JavaScript로 생성됩니다 -->
              </div>
            </div>

            <!-- 리뷰 관리 탭 -->
            <div id="reviews-tab" class="tab-content">
              <div class="review-sections">
                <div class="review-section">
                  <h3>작성 가능한 리뷰</h3>
                  <div class="pending-reviews" id="pendingReviews">
                    <!-- 작성 가능한 리뷰들이 JavaScript로 생성됩니다 -->
                  </div>
                </div>
                <div class="review-section">
                  <h3>내가 작성한 리뷰</h3>
                  <div class="my-reviews" id="myReviews">
                    <!-- 작성한 리뷰들이 JavaScript로 생성됩니다 -->
                  </div>
                </div>
              </div>
            </div>

            <!-- 포인트 탭 -->
            <div id="points-tab" class="tab-content">
              <div class="points-summary">
                <div class="current-points">
                  <h3>보유 포인트</h3>
                  <div class="points-amount" id="currentPointsAmount">0P</div>
                </div>
              </div>
              <div class="points-history">
                <div
                  class="points-history-header"
                  onclick="togglePointsHistory()"
                >
                  <h3>포인트 내역</h3>
                  <span class="dropdown-arrow" id="pointsHistoryArrow">▼</span>
                </div>
                <div class="points-list" id="pointsList" style="display: none">
                  <!-- 포인트 내역이 JavaScript로 생성됩니다 -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 리뷰 작성 모달 -->
    <div id="reviewModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">리뷰 작성</h2>
          <button class="modal-close" id="reviewModalClose">&times;</button>
        </div>

        <div class="modal-body">
          <div class="review-product-info" id="reviewProductInfo">
            <!-- 상품 정보가 JavaScript로 생성됩니다 -->
          </div>

          <div class="review-form">
            <div class="rating-section">
              <label>평점</label>
              <div class="star-rating" id="starRating">
                <span class="star" data-rating="1">★</span>
                <span class="star" data-rating="2">★</span>
                <span class="star" data-rating="3">★</span>
                <span class="star" data-rating="4">★</span>
                <span class="star" data-rating="5">★</span>
              </div>
            </div>

            <div class="review-text-section">
              <label for="reviewText">리뷰 내용</label>
              <textarea
                id="reviewText"
                placeholder="상품에 대한 솔직한 후기를 작성해주세요."
                rows="5"
              ></textarea>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button
            type="button"
            class="modal-btn cancel-btn"
            id="reviewCancelBtn"
          >
            취소
          </button>
          <button
            type="button"
            class="modal-btn confirm-btn"
            id="reviewSubmitBtn"
          >
            리뷰 등록
          </button>
        </div>
      </div>
    </div>

    <script src="header-auth.js"></script>
    <script src="cart.js"></script>
  </body>
</html>
