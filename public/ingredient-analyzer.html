<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì‹ì¬ë£Œ ë¶„ì„ - ì‡í”Œ</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body class="ingredient-analyzer-page">
    <div class="site-brand-fixed">
      <a href="index.html">
        <img src="images/eatplelogo.png" alt="ì‡í”Œ" class="logo-image">
      </a>
    </div>
    <div class="auth-links">
        <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
    </div>

    <!-- í—¤ë” ì„¹ì…˜ -->
    <section class="analyzer-header">
        <div class="header-content">
            <h1 class="page-title">AI ì‹ì¬ë£Œ ë¶„ì„</h1>
            <p class="page-description">
                ì‹ì¬ë£Œë¥¼ ê²€ìƒ‰í•˜ë©´ AIê°€ ìƒì„¸í•œ ì˜ì–‘ì •ë³´, íš¨ëŠ¥, ë¶€ì‘ìš©, ìš”ë¦¬ë²• ë“±ì„ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤
            </p>
        </div>
    </section>

    <!-- ê²€ìƒ‰ ì„¹ì…˜ -->
    <section class="search-section">
        <div class="ingredient-search-container">
            <div class="search-box">
                <div class="ingredient-search-input-wrapper">
                    <input type="text" id="ingredientSearch" class="search-input"
                        placeholder="ë¶„ì„í•  ì‹ì¬ë£Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë§ˆëŠ˜, ì—°ì–´...)" autocomplete="off">
                    <div class="search-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
                <div class="search-suggestions" id="searchSuggestions">
                    <!-- ê²€ìƒ‰ ì œì•ˆì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </section>

    <!-- ë¡œë”© ì„¹ì…˜ -->
    <section class="loading-section" id="loadingSection" style="display: none;">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <p class="loading-text">AIê°€ ì‹ì¬ë£Œë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
        </div>
    </section>

    <!-- ê²°ê³¼ ì„¹ì…˜ -->
    <section class="result-section" id="resultSection" style="display: none;">
        <div class="result-container">
            <!-- ê²°ê³¼ í—¤ë” -->
            <div class="result-header">
                <div class="ingredient-title">
                    <h2 id="ingredientName"></h2>
                    <p id="ingredientDescription"></p>
                </div>
                <div class="purchase-section">
                    <button id="purchaseButton" class="purchase-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m0 0h9m-9 0h9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        êµ¬ë§¤í•˜ê¸°
                    </button>
                </div>
            </div>

            <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
            <div class="ingredient-tab-navigation">
                <button class="ingredient-tab-btn active" data-tab="overview">ê°œìš”</button>
                <button class="ingredient-tab-btn" data-tab="nutrition">ì˜ì–‘ì„±ë¶„</button>
                <button class="ingredient-tab-btn" data-tab="usage">í™œìš©ë²•</button>
                <button class="ingredient-tab-btn" data-tab="benefits">ê±´ê°•íš¨ëŠ¥</button>
                <button class="ingredient-tab-btn" data-tab="cautions">ì£¼ì˜ì‚¬í•­</button>
            </div>

            <!-- íƒ­ ì½˜í…ì¸  -->
            <div class="ingredient-tab-content-container">
                <!-- ê°œìš” íƒ­ -->
                <div class="ingredient-tab-content active" id="overview">
                    <div class="overview-grid">
                        <div class="overview-card quick-facts">
                            <h3>í•µì‹¬ ì •ë³´</h3>
                            <div class="quick-facts-grid">
                                <div class="fact-item">
                                    <span class="fact-label">í˜ˆë‹¹ì§€ìˆ˜</span>
                                    <span class="fact-value" id="giValue"></span>
                                </div>
                                <div class="fact-item">
                                    <span class="fact-label">ì œì² </span>
                                    <span class="fact-value" id="seasonValue"></span>
                                </div>
                                <div class="fact-item">
                                    <span class="fact-label">ì£¼ìš” ì‚°ì§€</span>
                                    <span class="fact-value" id="originValue"></span>
                                </div>
                                <div class="fact-item">
                                    <span class="fact-label">ë°˜ë ¤ë™ë¬¼</span>
                                    <span class="fact-value" id="petSafetyValue"></span>
                                </div>
                            </div>
                        </div>

                        <div class="overview-card storage-card">
                            <h3>ë³´ê´€ë°©ë²•</h3>
                            <div class="storage-content" id="storageInfo"></div>
                        </div>
                    </div>

                    <div class="compatibility-section">
                        <div class="compatibility-card good">
                            <h3>ğŸ¤ ê¶í•© ì‹í’ˆ</h3>
                            <div class="compatibility-content" id="compatibilityValue"></div>
                        </div>
                        <div class="compatibility-card bad">
                            <h3>âš ï¸ ìƒê·¹ ì‹í’ˆ</h3>
                            <div class="compatibility-content" id="incompatibilityValue"></div>
                        </div>
                    </div>
                </div>

                <!-- ì˜ì–‘ì •ë³´ íƒ­ -->
                <div class="ingredient-tab-content" id="nutrition">
                    <div class="ingredient-nutrition-header">
                        <h3>ì˜ì–‘ì„±ë¶„ (100g ê¸°ì¤€)</h3>
                    </div>
                    <div class="nutrition-grid-modern" id="nutritionGrid">
                        <!-- ì˜ì–‘ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>

                <!-- ê±´ê°•íš¨ëŠ¥ íƒ­ -->
                <div class="ingredient-tab-content" id="benefits">
                    <div class="health-grid">
                        <div class="health-section benefits-section">
                            <h3>âœ… ê±´ê°• íš¨ëŠ¥</h3>
                            <div class="benefits-list" id="benefitsList"></div>
                        </div>

                        <div class="health-section components-section">
                            <h3>ğŸ§¬ í™œì„±ì„±ë¶„</h3>
                            <div class="components-list" id="componentsList"></div>
                        </div>
                    </div>

                    <div class="traditional-section">
                        <h3>ğŸ›ï¸ í•œì˜í•™ì  ê´€ì </h3>
                        <div class="traditional-content" id="traditionalInfo"></div>
                    </div>
                </div>

                <!-- ì£¼ì˜ì‚¬í•­ íƒ­ -->
                <div class="ingredient-tab-content" id="cautions">
                    <div class="cautions-grid">
                        <div class="side-effects-section">
                            <h3>âš ï¸ ë¶€ì‘ìš© ë° ì£¼ì˜ì‚¬í•­</h3>
                            <div class="side-effects-list" id="sideEffectsList"></div>
                        </div>

                        <div class="allergy-section">
                            <h3>ğŸ”´ ì•Œë ˆë¥´ê¸° ì •ë³´</h3>
                            <div class="allergy-content" id="allergyInfo"></div>
                        </div>
                    </div>

                    <div class="info-disclaimer">
                        <h3>ğŸ“‹ ì¤‘ìš” ì•ˆë‚´</h3>
                        <p>ë³¸ ì •ë³´ëŠ” ì¼ë°˜ì ì¸ ì°¸ê³ ìš©ì´ë©°, ê°œì¸ì˜ ê±´ê°• ìƒíƒœë‚˜ íŠ¹ë³„í•œ ìƒí™©ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì•Œë ˆë¥´ê¸°ë‚˜ ê¸°ì¡´ ì§ˆí™˜ì´ ìˆëŠ” ê²½ìš° ì˜ë£Œì§„ê³¼ ìƒë‹´ í›„ ì„­ì·¨í•˜ì‹œê¸°
                            ë°”ëë‹ˆë‹¤.</p>
                    </div>
                </div>

                <!-- í™œìš©ë²• íƒ­ -->
                <div class="ingredient-tab-content" id="usage">
                    <div class="usage-content">
                        <div class="recipes-section">
                            <h3>ğŸ‘¨â€ğŸ³ ì¶”ì²œ ìš”ë¦¬ë²•</h3>
                            <div class="recipes-list" id="recipesList"></div>
                        </div>

                        <div class="tips-section">
                            <h3>ğŸ’¡ í™œìš© íŒ</h3>
                            <div class="ingredient-tips-content" id="usageTips">
                                <!-- AIê°€ ìƒì„±í•œ í™œìš© íŒì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="toast-container" id="toastContainer"></div>

    <!-- ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="footer-nav-mobile">
      <ul>
        <li class="footer-nav-item" id="footerNavHome">
          <a href="index.html">
            <span class="footer-nav-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9,22 9,12 15,12 15,22"></polyline>
              </svg>
            </span>
            <span class="footer-nav-label">í™ˆ</span>
          </a>
        </li>
        <li class="footer-nav-item" id="footerNavNutrition">
          <a href="nutrition-info.html">
            <span class="footer-nav-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14,2 14,8 20,8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10,9 9,9 8,9"></polyline>
              </svg>
            </span>
            <span class="footer-nav-label">ì˜ì–‘ì •ë³´</span>
          </a>
        </li>
        <li class="footer-nav-item" id="footerNavAI">
          <button type="button" class="footer-nav-ai-btn">
            <span class="footer-nav-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4"></path>
                <path d="M21 12c-1 0-2-1-2-2s1-2 2-2 2 1 2 2-1 2-2 2z"></path>
                <path d="M3 12c1 0 2-1 2-2s-1-2-2-2-2 1-2 2 1 2 2 2z"></path>
                <path d="M12 3c0 1-1 2-2 2s-2-1-2-2 1-2 2-2 2 1 2 2z"></path>
                <path d="M12 21c0-1 1-2 2-2s2 1 2 2-1 2-2 2-2-1-2-2z"></path>
              </svg>
            </span>
            <span class="footer-nav-label">AIê¸°ëŠ¥</span>
          </button>
        </li>
        <li class="footer-nav-item" id="footerNavStore">
          <a href="store.html">
            <span class="footer-nav-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
            </span>
            <span class="footer-nav-label">ìŠ¤í† ì–´</span>
          </a>
        </li>
        <li class="footer-nav-item" id="footerNavMy">
          <a href="mypage.html">
            <span class="footer-nav-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </span>
            <span class="footer-nav-label">ë§ˆì´</span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- AI ê¸°ëŠ¥ ëª¨ë‹¬ -->
    <div id="aiFeatureModal" class="ai-feature-modal">
      <div class="ai-feature-modal-content">
        <ul>
          <li><a href="meal-plan.html">ë­ í•´ë¨¹ì§€?</a></li>
          <li><a href="supplements.html">ë‚˜ë§Œì˜ ì˜ì–‘ì œ</a></li>
          <li><a href="restaurant-recommendation.html">ì˜¤ëŠ˜ì˜ ë§›ì§‘</a></li>
        </ul>
      </div>
    </div>



    <script src="script.js"></script>
    <script src="ingredient-analyzer.js"></script>
    <script>
        // ë¹„ë¡œê·¸ì¸ ìƒíƒœì—ì„œ íŠ¹ì • ì„¹ì…˜ë“¤ ë¸”ëŸ¬ ì²˜ë¦¬
        function applyIngredientAnalyzerRestrictions() {
            // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
            const user = JSON.parse(localStorage.getItem('user') || 'null');
            const isLoggedIn = !!user;
            
            if (!isLoggedIn) {
                const sectorsToBlur = ['.nutrition-grid-modern', '.components-list', '.recipes-list'];
                
                // DOM ë³€í™” ê°ì§€
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        mutation.addedNodes.forEach(function(node) {
                            if (node.nodeType === 1) { // Element node
                                sectorsToBlur.forEach(function(selector) {
                                    const sections = node.querySelectorAll ? node.querySelectorAll(selector) : [];
                                    const isTargetSection = node.classList && node.classList.contains(selector.substring(1));
                                    
                                    const sectionsToBlur = isTargetSection ? [node] : Array.from(sections);
                                    
                                    sectionsToBlur.forEach(function(section) {
                                        if (!section.classList.contains('login-required-blur')) {
                                            // ë¸”ëŸ¬ íš¨ê³¼ ì ìš©
                                            section.classList.add('login-required-blur');
                                            
                                            // position ì„¤ì • (ì¤‘ìš”!)
                                            const computedStyle = window.getComputedStyle(section);
                                            if (computedStyle.position === 'static') {
                                                section.style.position = 'relative';
                                            }
                                            
                                            // ì˜¤ë²„ë ˆì´ ë©”ì‹œì§€ ì¶”ê°€
                                            const overlay = document.createElement('div');
                                            overlay.className = 'login-required-overlay';
                                            overlay.innerHTML = `
                                                <div class="login-required-message">
                                                    <span class="lock-icon">ğŸ”‘</span>
                                                    <span class="message-text">ë¡œê·¸ì¸í•˜ê³  ëª¨ë“  ê¸°ëŠ¥ì„ ì´ìš©í•´ ë³´ì„¸ìš”</span>
                                                </div>
                                            `;
                                            
                                            section.appendChild(overlay);
                                            
                                            // ë””ë²„ê¹…ì„ ìœ„í•œ ë¡œê·¸
                                            console.log('Ingredient overlay added to:', section);
                                        }
                                    });
                                });
                            }
                        });
                    });
                });
                
                // DOM ë³€í™” ê°ì§€ ì‹œì‘
                observer.observe(document.body, {
                    childList: true,
                    subtree: true
                });
                
                // ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì„¹ì…˜ë“¤ ì²˜ë¦¬
                sectorsToBlur.forEach(function(selector) {
                    document.querySelectorAll(selector).forEach(function(section) {
                        if (!section.classList.contains('login-required-blur')) {
                            section.classList.add('login-required-blur');
                            
                            // position ì„¤ì • (ì¤‘ìš”!)
                            const computedStyle = window.getComputedStyle(section);
                            if (computedStyle.position === 'static') {
                                section.style.position = 'relative';
                            }
                            
                            const overlay = document.createElement('div');
                            overlay.className = 'login-required-overlay';
                            overlay.innerHTML = `
                                <div class="login-required-message">
                                    <span class="lock-icon">ğŸ”‘</span>
                                    <span class="message-text">ë¡œê·¸ì¸í•˜ê³  ëª¨ë“  ê¸°ëŠ¥ì„ ì´ìš©í•´ ë³´ì„¸ìš”</span>
                                </div>
                            `;
                            
                            section.appendChild(overlay);
                            
                            // ë””ë²„ê¹…ì„ ìœ„í•œ ë¡œê·¸
                            console.log('Ingredient overlay added to existing section:', section);
                        }
                    });
                });
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', applyIngredientAnalyzerRestrictions);
    </script>
</body>

</html>